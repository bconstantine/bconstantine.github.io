    <!-- …the rest of your HTML up thru <script> stays the same… -->

    <script>
      const tags = [
        ["Ground Truth Video", "ground_truth"],
        ["Ground Truth Sketch", "ground_truth_sketch"],
        ["SketchColour (Ours)", "sketchcolour"],
        ["LVCD", "lvcd"],
        ["ToonCrafter", "tooncrafter"],
        ["AniDoc", "anidoc"],
      ];
      const basePath = "assets/videos";
      const gallery = document.getElementById("gallery");

      // 1️⃣ Fetch the directory listing for one of the sub-folders:
      async function fetchBasenames() {
        const res = await fetch(`${basePath}/ground_truth/`);
        if (!res.ok) throw new Error("Directory listing not available");
        const html = await res.text();
        // 2️⃣ Parse it to pull out all .mp4 filenames
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");
        return Array.from(doc.querySelectorAll("a"))
          .map(a => a.getAttribute("href"))
          .filter(name => name.endsWith(".mp4"))
          .map(name => name.replace(/\.mp4$/, ""));
      }

      // 3️⃣ Once we have the basenames, build each section just like before
      (async () => {
        let basenames;
        try {
          basenames = await fetchBasenames();
        } catch (e) {
          console.error(e);
          // fallback or show an error message to the user
          return;
        }

        basenames.forEach((base, idx) => {
          const section = document.createElement("section");
          section.className = "demo-section";
          section.id = `example-${idx + 1}`;
          section.innerHTML = `
            <h2>Scene ${idx + 1}: <code>${base}</code></h2>
            <div class="demo-grid"></div>
          `;
          const grid = section.querySelector(".demo-grid");

          tags.forEach(([label, slug]) => {
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
              <h3>${label}</h3>
              <video
                muted autoplay playsinline preload="metadata"
                src="${basePath}/${slug}/${base}.mp4"
              ></video>
            `;
            grid.appendChild(card);
          });

          gallery.appendChild(section);
        });

        // 4️⃣ Sync the looping as before
        document.querySelectorAll(".demo-section").forEach(section => {
          const vids = Array.from(section.querySelectorAll("video"));
          let endedCount = 0;
          vids.forEach(v => {
            v.addEventListener("loadedmetadata", () => v.play());
            v.addEventListener("ended", () => {
              endedCount += 1;
              if (endedCount === vids.length) {
                endedCount = 0;
                vids.forEach(vid => {
                  vid.currentTime = 0;
                  setTimeout(() => vid.play(), 50);
                });
              }
            });
          });
        });
      })();
    </script>
